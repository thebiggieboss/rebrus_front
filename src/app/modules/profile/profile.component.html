<app-layout>
  <div class="profile" nz-row [nzGutter]="[0, 36]">
    <div class="profile-main" nz-col nzSpan="24">
      <div
        nz-row
        [formGroup]="userInfoEditForm"
        [nzGutter]="[80, 36]"
        style="padding-top: 36px">
        <div nz-col nzSpan="8">
          <div class="profile-main_avatar">
            <nz-avatar
              [nzSize]="100"
              nzText="{{ ava }}"
              style="
                color: #ffffff;
                background-color: #0075ff;
                font-size: 40px;
              "></nz-avatar>
            <p class="profile-main_title">{{ who }}</p>
            <p class="profile-main_number">1234567890</p>
          </div>
        </div>
        <div
          nz-col
          nzSpan="8"
          style="display: flex; gap: 16px; flex-direction: column">
          <div class="profile-field">
            <label for="role" class="profile-field_label"> Роль </label>
            <input
              id="role"
              formControlName="role"
              nz-input
              placeholder="Заполните поле"
              type="text"
              class="profile-field_input"
              [nzStatus]="isFieldWrapperInvalid('role', userInfoEditForm)" />
          </div>
          <div class="profile-field">
            <label for="phone" class="profile-field_label"> Телефон </label>
            <input
              id="phone"
              formControlName="phone"
              nz-input
              placeholder="Заполните поле"
              [mask]="' (000) 000 00 00'"
              [prefix]="'+7'"
              type="text"
              class="profile-field_input"
              [nzStatus]="isFieldWrapperInvalid('phone', userInfoEditForm)" />
          </div>
        </div>
        <div
          nz-col
          nzSpan="8"
          style="display: flex; gap: 16px; flex-direction: column">
          <div class="profile-field">
            <label for="region" class="profile-field_label"> Регион </label>
            <div>
              <nz-select
                id="region"
                formControlName="region"
                class="profile-field_select"
                nzAllowClear
                nzPlaceHolder="Выберите регион"
                [nzStatus]="isFieldWrapperInvalid('region', userInfoEditForm)">
                <nz-option nzValue="almaty" nzLabel="Алматы"></nz-option>
              </nz-select>
            </div>
          </div>
          <div class="profile-field">
            <label for="gender" class="profile-field_label"> Пол </label>
            <div>
              <nz-radio-group id="gender" formControlName="gender">
                <div nz-row style="margin-top: 12px">
                  <div nz-col nzSpan="12">
                    <label nz-radio nzValue="M">Мужчина</label>
                  </div>
                  <div nz-col nzSpan="12">
                    <label nz-radio nzValue="F">Женщина</label>
                  </div>
                </div>
              </nz-radio-group>
            </div>
          </div>
        </div>
        <div nz-col nzSpan="24" class="profile-main_btn">
          <button
            nz-button
            nzType="default"
            nzBlock
            (click)="onChangeUserInfo()">
            Изменить
          </button>
        </div>
      </div>
    </div>
    <div class="profile-actions" nz-col nzSpan="24">
      <div nz-row [nzGutter]="56" style="height: 100%">
        <div nz-col nzSpan="12" [formGroup]="changePasswordForm">
          <div class="profile-actions_passwords">
            <p class="profile-actions_passwords-title">Изменить пароль?</p>
            <div>
              <label
                for="currentPassword"
                class="profile-actions_passwords_label">
                Нынешний пароль
              </label>
              <nz-input-group
                [nzSuffix]="suffixCurrentTemplate"
                [nzStatus]="
                  isFieldWrapperInvalid('currentPassword', changePasswordForm)
                "
                class="profile-actions_passwords_input">
                <input
                  id="currentPassword"
                  formControlName="currentPassword"
                  nz-input
                  placeholder="Заполните поле"
                  [type]="currentPasswordVisible ? 'text' : 'password'" />
              </nz-input-group>
              <ng-template #suffixCurrentTemplate>
                <span
                  nz-icon
                  [nzType]="currentPasswordVisible ? 'eye' : 'eye-invisible'"
                  (click)="
                    currentPasswordVisible = !currentPasswordVisible
                  "></span>
              </ng-template>
            </div>
            <div>
              <label for="password" class="profile-actions_passwords_label">
                Новый пароль
              </label>
              <nz-input-group
                [nzSuffix]="suffixTemplate"
                [nzStatus]="
                  isFieldWrapperInvalid('password', changePasswordForm)
                "
                class="profile-actions_passwords_input">
                <input
                  id="password"
                  formControlName="password"
                  nz-input
                  placeholder="Заполните поле"
                  [type]="passwordVisible ? 'text' : 'password'" />
              </nz-input-group>
              <ng-template #suffixTemplate>
                <span
                  nz-icon
                  [nzType]="passwordVisible ? 'eye' : 'eye-invisible'"
                  (click)="passwordVisible = !passwordVisible"></span>
              </ng-template>
            </div>
            <div>
              <label
                for="confirmPassword"
                class="profile-actions_passwords_label">
                Подтвердите пароль
              </label>
              <nz-input-group
                [nzSuffix]="suffixConfirmTemplate"
                [nzStatus]="
                  isFieldWrapperInvalid('confirmPassword', changePasswordForm)
                "
                class="profile-actions_passwords_input">
                <input
                  id="confirmPassword"
                  formControlName="confirmPassword"
                  nz-input
                  placeholder="Заполните поле"
                  [type]="confirmPassVisible ? 'text' : 'password'" />
              </nz-input-group>
              <ng-template #suffixConfirmTemplate>
                <span
                  nz-icon
                  [nzType]="confirmPassVisible ? 'eye' : 'eye-invisible'"
                  (click)="confirmPassVisible = !confirmPassVisible"></span>
              </ng-template>
            </div>
            <button
              nz-button
              nzType="primary"
              style="border-radius: 6px; max-width: 140px; margin: 0 auto"
              (click)="onChangePassword()">
              Сохранить
            </button>
          </div>
        </div>
        <div nz-col nzSpan="12" style="height: 100%">
          <div class="profile-container">
            <div class="profile-container_block1" [formGroup]="changeEmailForm">
              <p class="profile-container_block1-title">Сменить почту?</p>
              <div>
                <label for="currentEmail" class="profile-container_label">
                  Нынешняя электронная почта
                </label>
                <input
                  id="currentEmail"
                  formControlName="currentEmail"
                  nz-input
                  placeholder="Напишите нынешнюю почту"
                  type="email"
                  class="profile-container_input"
                  [nzStatus]="
                    isFieldWrapperInvalid('currentEmail', changeEmailForm)
                  " />
              </div>
              <div>
                <label for="newEmail" class="profile-container_label">
                  Новая электронная почта
                </label>
                <input
                  id="newEmail"
                  formControlName="newEmail"
                  nz-input
                  placeholder="Напишите новую почту"
                  type="email"
                  class="profile-container_input"
                  [nzStatus]="
                    isFieldWrapperInvalid('newEmail', changeEmailForm)
                  " />
              </div>
              <button
                class="profile-container_block1_btn"
                nz-button
                nzType="default"
                nzBlock
                (click)="onChangeEmail()">
                Изменить
              </button>
            </div>
            <div class="profile-container_block2">
              <p class="profile-container_block2-title">Действия с аккаунтом</p>
              <div class="profile-container_block2_btns">
                <button
                  style="width: 100%; max-width: 240px"
                  nz-button
                  nzType="default"
                  nzDanger
                  (click)="actionWithProfile('deactivate')">
                  Деактивация
                </button>

                <button
                  style="width: 100%; max-width: 240px"
                  nz-button
                  nzType="primary"
                  nzDanger
                  (click)="actionWithProfile('delete')">
                  Удалить
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</app-layout>
